import Layout from 'lib/components/layout'
import { Link, Card } from '@geist-ui/react'

export const meta = {
  title: 'Next.js + MDX で数式を扱う',
  date: '2019-11-08T23:26:14+09:00',
  description: '',
  image: '',
}

Next.js と MDX で構築されたこのブログで、TeX を扱えるようにしていきたいと思います。  
まず、[@mdx-js/loader](https://github.com/mdx-js/mdx/tree/master/packages/loader) を入れます。
これは `next.config.js` 内で MDX 向けのプラグインをカスタマイズするのに必要です。入っていなければ、

```bash
npm install @mdx-js/loader
```

してください。  

  

その後は、

```bash
npm install remark-math@3.0.1
npm install rehype-katex@3.0.0
```

してから、[ドキュメンテーション](https://mdxjs.com/guides/math-blocks)通りに `next.config.js` を編集しましょう。

<Card shadow>
  <h4>2020.10.20 追記</h4>
  <p>最新バージョンの remark-math と rehype-katex ではうまく数式がレンダリングされないことが判明したので、バージョンを付記しておきました。</p>
</Card>


このブログのリポジトリの[コミット](https://github.com/HelloRusk/blog.hellorusk.net/commit/e300f2d14e0d7bf692048b65015df2a27a5aa3bd)も参考にしてください。


これで TeX を使う準備が整います。  
MDX 内で KaTeX CSS を挿入する必要があることにも注意しましょう（数式をブログでよく使う人は、
ブログのテンプレートにCSSの部分も加えた方がいいかもしれませんね！）。

$$
L = \frac{1}{2} \rho v^2 S C_L
$$

$$
f(x) = \int_{-\infty}^\infty
    \hat f(\xi)\,e^{2 \pi i \xi x}
    \,d\xi
$$

これで無事に $\TeX$ が使えるようになりましたね！






export default ({ children }) => <Layout meta={meta}>{children}</Layout>
